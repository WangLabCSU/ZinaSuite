% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis-grouping.R
\name{query_tcga_group}
\alias{query_tcga_group}
\title{Query TCGA Sample Groups}
\usage{
query_tcga_group(
  database = c("tcga", "pcawg", "ccle"),
  cancer = NULL,
  custom = NULL,
  group = "Gender",
  filter_by = NULL,
  filter_id = NULL,
  merge_by = NULL,
  merge_quantile = FALSE,
  return_all = FALSE
)
}
\arguments{
\item{database}{Data source: "tcga", "pcawg", or "ccle"}

\item{cancer}{Cancer cohort(s) to include. If NULL, includes all cancers.}

\item{custom}{Custom phenotype data frame to merge with built-in data}

\item{group}{Target grouping variable name (e.g., "Gender", "Stage_ajcc")}

\item{filter_by}{List of filtering conditions. Each condition is a vector
of format: c("variable", values, "operator"). Operators:
\itemize{
\item "+": include samples with these values
\item "-": exclude samples with these values
\item ">": greater than (numeric)
\item "<": less than (numeric)
\item "\%>": greater than percentile (numeric)
\item "\%<": less than percentile (numeric)
}}

\item{filter_id}{Vector of sample IDs to filter (direct inclusion)}

\item{merge_by}{List defining custom group merging. For categorical:
list("Group1" = c("value1", "value2"), "Group2" = c("value3"))
For numeric: list("Low" = c(0, 50), "High" = c(50, NA))}

\item{merge_quantile}{Whether to interpret numeric merge_by as quantiles}

\item{return_all}{Whether to return all phenotype columns}
}
\value{
A list with:
\itemize{
\item data: Data frame with Sample, Cancer, and group columns
\item stat: Summary statistics of the grouping
}
}
\description{
Group TCGA/PCAWG/CCLE samples by built-in phenotypes or custom criteria.
Supports filtering, merging operations, and custom group definitions.
}
\examples{
\donttest{
# Basic grouping by gender across all cancers
result <- query_tcga_group(group = "Gender")
head(result$data)

# Group by stage for specific cancer
result <- query_tcga_group(
  database = "tcga",
  cancer = "BRCA",
  group = "Stage_ajcc"
)

# Filter and group
result <- query_tcga_group(
  cancer = "BRCA",
  group = "Stage_ajcc",
  filter_by = list(
    c("Code", c("TP"), "+"),
    c("Stage_ajcc", c(NA), "-")
  )
)

# Numeric filtering with percentile
result <- query_tcga_group(
  cancer = "BRCA",
  group = "Age",
  filter_by = list(c("Age", c(0.5), "\%>"))
)

# Merge groups (categorical)
result <- query_tcga_group(
  cancer = "BRCA",
  group = "Stage_ajcc",
  merge_by = list(
    "Early" = c("Stage I"),
    "Late" = c("Stage II", "Stage III", "Stage IV")
  )
)

# Merge groups (numeric with percentiles)
result <- query_tcga_group(
  cancer = "BRCA",
  group = "Age",
  merge_quantile = TRUE,
  merge_by = list(
    "Young" = c(0, 0.5),
    "Old" = c(0.5, 1)
  )
)
}
}
